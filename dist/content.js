const activeURL=window.location.href.toString(),pattern=/sunrun.my.salesforce/,pattern2=/visual.force.com/;let isSalesforcePage=pattern.test(activeURL)||pattern2.test(activeURL);console.log(isSalesforcePage,activeURL),chrome.storage.sync.get("salesforceColor",(e=>{for(key in e)isSalesforcePage&&(document.body.style.backgroundColor=e[key].toString())})),chrome.storage.sync.onChanged.addListener((async e=>{let t=e.salesforceColor;isSalesforcePage&&(document.body.style.backgroundColor=t.newValue.toString())})),console.log("Extension Loaded"),chrome.runtime.onMessage.addListener(((e,t,d)=>{let i,a;switch(i=e.currentTab.url.toString().includes("wfproject")?"project":document.getElementsByClassName("pageType")[0].innerText,i.toLowerCase()){case"opportunity":a=['//*[@id="ep"]/div[2]/div[9]/table/tbody/tr[28]/td[4]','//*[@id="ep"]/div[2]/div[11]/table/tbody/tr[1]/td[2]','//*[@id="ep"]/div[2]/div[11]/table/tbody/tr[6]/td[4]'];break;case"service contract":a=['//*[@id="bodyCell"]/div[1]/div[1]/div[1]/h2','//*[@id="ep"]/div[2]/div[5]/table/tbody/tr[1]/td[2]','//*[@id="ep"]/div[2]/div[5]/table/tbody/tr[1]/td[4]/a','//*[@id="ep"]/div[2]/div[5]/table/tbody/tr[2]/td[2]','//*[@id="ep"]/div[2]/div[5]/table/tbody/tr[3]/td[2]','//*[@id="ep"]/div[2]/div[5]/table/tbody/tr[4]/td[2]','//*[@id="ep"]/div[2]/div[5]/table/tbody/tr[5]/td[2]','//*[@id="ep"]/div[2]/div[5]/table/tbody/tr[4]/td[2]','//*[@id="ep"]/div[2]/div[5]/table/tbody/tr[5]/td[2]'];break;case"project":a=["//*/div/div[1]/div/div/div/div/div[2]/h1","//*/div/table/tbody/tr[2]/td[1]/c-display-fields/div/div/div[2]/div/div/a","//*/div/div/div/div/div[2]/c-wfm-project-details-section/div/div/div[1]/c-display-fields[5]/div/div/div[2]/div/lightning-formatted-rich-text/span"];break;case"proposal":a=['//*[@id="bodyCell"]/div[1]/div[1]/div[1]/h2','//*[@id="ep"]/div[2]/div[15]/table/tbody/tr[1]/td[2]','//*[@id="ep"]/div[2]/div[5]/table/tbody/tr[7]/td[2]'];break;case"user":a=['//*[@id="bodyCell"]/div[1]/div[1]/div[1]/h2','//*[@id="ep"]/div[2]/div[2]/table/tbody/tr[3]/td[4]/a','//*[@id="ep"]/div[2]/div[2]/table/tbody/tr[6]/td[2]','//*[@id="_RelatedPermsetAssignmentList_body"]/table']}let o,r=window.location.href;o="user"===i.toLowerCase()?a.map((e=>document.evaluate(e,document,null,XPathResult.FIRST_ORDERED_NODE_TYPE,null))):a.map((e=>document.evaluate(e,document,null,XPathResult.FIRST_ORDERED_NODE_TYPE,null).singleNodeValue.innerText));let l=[i,r,o[0],o[1],o[2]],v=[i,r,o[0],o[1],o[2],o[3],o[4],o[5],o[6]],s=[i,r,o[0],o[1],o[2]],n=[i,r,o[0],o[1],o[2]];switch(o[0],o[1],o[2],"ping"===e.greeting&&i.toLowerCase()){case"opportunity":d({farewell:"pong",data:l});break;case"service contract":d({farewell:"pong",data:v});break;case"project":d({farewell:"pong",data:s});break;case"proposal":d({farewell:"pong",data:n})}}));