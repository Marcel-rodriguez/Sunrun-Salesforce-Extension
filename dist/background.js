console.log("background loaded");let menuInfo={id:"ITSD Search In Salesforce",title:'Search salesforce for "%s"',contexts:["selection"]};async function getCurrentTab(){let[e]=await chrome.tabs.query({active:!0,lastFocusedWindow:!0});return e}chrome.contextMenus.create(menuInfo),chrome.contextMenus.onClicked.addListener((e=>{e.menuItemId===menuInfo.id&&e.selectionText.length>0&&searchInSalesforce(e.selectionText.trim(),getCurrentTab())}));let createdTabId="itsdExtension";function searchInSalesforce(e,t){const n={url:`https://sunrun.my.salesforce.com/_ui/search/ui/UnifiedSearchResults?searchType=2&sen=001&sen=003&sen=a7Z&sen=500&sen=005&sen=0Hn&sen=006&sen=810&sen=a08&sen=a7e&str=${e=e.trim()}`,active:!0};"itsdExtension"==createdTabId?chrome.tabs.create(n,(e=>{createdTabId=e.id})):chrome.tabs.get(createdTabId,(e=>{e?chrome.tabs.update(e.id,n):chrome.tabs.create(n,(e=>{createdTabId=e.id}))}))}